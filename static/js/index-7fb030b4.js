import{af as s,l as y,m as M,p as C,W as a,F as x,av as W,aw as H,ax as de,P as k,Q as d,U as g,a5 as D,R as J,X as G,V as L,K as ie,T as K,ay as B,e as T,_ as N,a as E,ai as se,ab as A,d as ce,az as ue,aA as pe,as as fe,aB as me,aC as _e}from"./vue-5759d858.js";import{a as ye,l as U}from"./utils-46f74508.js";import{E as F,i as ge}from"./ele-a484ef3a.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function o(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerpolicy&&(r.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?r.credentials="include":l.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=o(l);fetch(l.href,r)}})();const V=(e,t)=>{const o=e.__vccOpts||e;for(const[n,l]of t)o[n]=l;return o},he={},be=e=>(W("data-v-d3ff0aed"),e=e(),H(),e),Ce=be(()=>C("header",null," \u5929\u732B\u6EE1\u51CF\u8BA1\u7B97 (\u5148\u65B0\u589E \u54C1\u724C \u518D\u65B0\u589E \u5546\u54C1 \uFF01\uFF01\u6D89\u53CA\u5E97\u94FA\u5238/\u6DD8\u91D1\u5E01/88vip95\u6298\uFF0C\u5B9E\u4ED8\u8BA1\u7B97\u4E0D\u6B63\u786E\uFF01\uFF01\u4E00\u6B21\u8BA1\u7B97\u6700\u591A\u900920\u4E2A\u54C1\uFF01\uFF01) ",-1));function Me(e,t){const o=s("RouterView");return y(),M(x,null,[Ce,C("main",null,[a(o)])],64)}const Oe=V(he,[["render",Me],["__scopeId","data-v-d3ff0aed"]]),Z=()=>ye("1234567890abcdefghijklmnopqrstuvwxyz",8)(8),q=(e,t,o="")=>{const n=new Blob([e],{type:`application/${t}`});if(o=`${o}.${t}`,window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(n,o);else{const l=document.createElement("a"),r=document.querySelector("body");l.href=window.URL.createObjectURL(n),l.download=o,l.style.display="none",r.appendChild(l),l.click(),r.removeChild(l),window.URL.revokeObjectURL(l.href)}},P=({array:e=[],map:t={},key:o="id",value:n="item"})=>(e.forEach(l=>{const r=o?l[o]:l,i=n==="item"?l:l[n];t[r]=i}),t),ee=e=>typeof e=="string",ve=e=>Object.prototype.toString.call(e)==="[object Object]",te=e=>Object.prototype.toString.call(e)==="[object Array]",Q=e=>e==null||ee(e)&&e===""||te(e)&&e.length===0||ve(e)&&Object.keys(e).length===0,ke=e=>new Promise(t=>{const o=new FileReader;o.readAsText(e),o.onload=n=>{const l=JSON.parse(n.target.result);t(l)}}),v=e=>Math.round(e*100)/100,we=()=>"#"+Math.floor(Math.random()*16777215).toString(16);class z{constructor(t={}){var o;Object.assign(this,t),this.map=(o=this.map)!=null?o:{},this.options=this.getOptions()}getOptions(){const t=[];if(Object.keys(this.map).length)for(let o in this.map){/^[0-9]*$/.test(o)&&(o=+o);let n={label:this.map[o],value:o};t.push(n)}return t}}class j{constructor({productList:t=[],calcCon:o={},moneyOffConfig:n,categoryCouponConfig:l}){Object.assign(this,{productList:t,calcCon:o,categoryCouponConfig:l}),this.moneyOffSlnConfig=n[o.moneyOff.id],this.cateCouponLength=Object.keys(this.categoryCouponConfig).length,this.productMap=P({array:this.productList,key:"id",value:"item"})}calc(){console.time("calc");const t=this.getSubsets();console.log("----\u8BA2\u5355\u7EC4\u5408\u8BA1\u7B97\u5B8C\u6210-----");const o=this.getResult(t);return console.log("----\u7ED3\u679C\u8BA1\u7B97\u5B8C\u6210-----"),console.timeEnd("calc"),o}total(){const t=this.getOrder(this.productList),{balance:o,depositTotal:n,categoryCouponTotal:l}=t;return Object.assign(t,{balance:v(o-l),cutDeposit:v(o-n-l)})}getSubsets(){const t=[],o=this.productList.length;for(let n=0;n<1<<o;++n){const l=[];for(let r=0;r<o;++r)n&1<<r&&l.push(this.productList[r]);if(l.length){const r=this.getOrder(l);r&&t.push(r)}}return t}getOrder(t){const{threshold:o,off:n}=this.moneyOffSlnConfig,l=this.getStatictics(t),{moneyOffPriceTotal:r,categoryCouponCalc:i,depositTotal:p}=l,c=this.getCategoryCouponSln(i),m={order:t,...l,moneyOffTotal:v(Math.floor(r/o)*n),moneyOffDiff:v(r%o),...c},f=this.getBalance(m);return Object.assign(m,{balance:f,cutDeposit:v(f-p)}),m}static moneyOffCalc({price:t,moneyOffId:o},n){let l=0;if(o!==""){const{threshold:r,off:i}=n[o]||{};l=v(Math.floor(t/r)*i)}return l}static taoCoinCalc({price:t,taoCoin:o}){return o?v(t*o/100):0}getStatictics(t){return t.reduce((o,n)=>{var h;const{moneyOffId:l,price:r,categoryCouponType:i,deposit:p,cutPrice:c,productCoupon:m,taoCoin:f}=n;return o.total=v(o.total+r),o.depositTotal=v(o.depositTotal+p),o.cutPriceTotal=v(o.cutPriceTotal+c),o.productCouponTotal=v(o.productCouponTotal+m),l===this.moneyOffSlnConfig.id&&(o.moneyOffPriceTotal=o.moneyOffPriceTotal+r),i&&(o.categoryCouponCalc[i]=((h=o.categoryCouponCalc[i])!=null?h:0)+r),f&&(o.taoCoinTotal=o.taoCoinTotal+j.taoCoinCalc(n)),o},{total:0,moneyOffPriceTotal:0,depositTotal:0,cutPriceTotal:0,productCouponTotal:0,taoCoinTotal:0,categoryCouponCalc:{}})}getCategoryCouponSln(t){const o={categoryCoupon:[],categoryCouponTotal:0};return Object.entries(t).forEach(([n,l])=>{const{threshold:r}=this.categoryCouponConfig[n];l>=r&&(o.categoryCoupon.push(n),o.categoryCouponTotal=o.categoryCouponTotal+this.categoryCouponConfig[n].off)}),o}getBalance(t){const{total:o,moneyOffTotal:n,productCouponTotal:l,cutPriceTotal:r,taoCoinTotal:i}=t,p=o-n-l-i-r;return v(p)}getResult(t){const o=[];for(let n=0;n<t.length;n++){const l=t[n],{moneyOff:r,categoryCoupon:i,balance:p}=this.calcCon;let c=null;if(l.moneyOffDiff<=r.precision&&(c=l),c&&i.calc){l.balance=v(l.balance-l.categoryCouponTotal),c=null;const m=i.type.length;m===0?c=l:m<this.cateCouponLength?l.categoryCoupon.length>=m&&i.type.forEach(f=>{l.categoryCoupon.includes(f)&&(c=l)}):l.categoryCoupon.length===m&&(c=l)}if(c&&!i.calc&&(l.categoryCoupon=[],c=l),c&&p.calc){c=null;const{threshold:m,precision:f}=p;l.balance>=m&&l.balance-m<=f&&(l.balanceDiff=v(l.balance-m),c=l)}c&&(c.products=U.exports.orderBy(c.order,["brandId"],["desc"]).map(m=>m.productName).join("|"),o.push(c))}return o}}const Y=[{id:0,couponName:"\u7F8E\u5986\u60CA\u559C\u5238",couponType:"makeup",threshold:1200,off:110,type:"success"},{id:1,couponName:"\u7CBE\u81F4\u751F\u6D3B\u5238",couponType:"life",threshold:200,off:15,type:"warning"},{id:2,couponName:"\u7F8E\u98DF\u60CA\u559C\u5238",couponType:"food",threshold:200,off:20,type:"info"}],Ve=[{id:0,threshold:1e3,off:50},{id:1,threshold:3800,off:300},{id:2,threshold:6800,off:520}],$=[{id:0,label:"300-50",threshold:300,off:50}],Le={id:null,brandName:"",remark:""},xe={brandName:[{required:!0,message:"\u8BF7\u8F93\u5165\u54C1\u724C\u540D\u79F0",trigger:"blur"}]},oe={id:null,productName:"",content:"",brandId:"",unitPrice:0,quantity:1,price:0,taoCoin:0,categoryCouponType:"",moneyOffId:0,voncher:!0,productCoupon:0,cutPrice:0,presale:!1,deposit:0,presaleTime:"",payTime:"",remark:""},Se={productName:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0",trigger:"blur"}],brandId:[{required:!0,message:"\u8BF7\u9009\u62E9\u54C1\u724C",trigger:"change"}],unitPrice:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EF7\u683C"},{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}],quantity:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EF7\u683C"},{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}],productCoupon:[{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}],taoCoin:[{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}],cutPrice:[{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}],deposit:[{type:"number",message:"\u8BF7\u8F93\u5165\u6570\u5B57"}]},Te=de("cart",{state:()=>({productList:[],productNextId:0,productSelectionList:[],brandList:[],orderList:[],prodFilterModel:{disableOrdered:!0,brandId:null},resultFilterModel:{moneyOff:{calc:!0,id:0,precision:0},categoryCoupon:{calc:!1,type:[]},balance:{calc:!1,threshold:1e3,precision:10}}}),getters:{voncherOptions(){return Ve.map(e=>Object.assign(e,{label:`${e.threshold}-${e.off}`,value:e.threshold}))},brandMapping(){const e=this.brandList.map(o=>Object.assign(o,{color:we()}));return new z({map:P({array:e,key:"id",value:"brandName"}),color:P({array:e,key:"id",value:"color"})})},categoryCouponMapping(){return new z({map:P({array:Y,key:"couponType",value:"couponName"}),config:P({array:Y,key:"couponType",value:"item"}),type:P({array:Y,key:"couponType",value:"type"})})},moneyOffMapping(){return new z({map:P({array:$,key:"id",value:"label"}),config:P({array:$,key:"id",value:"item"})})},productListIndexs:e=>{const t={};return e.productList.forEach((o,n)=>{t[o.id]=n}),t},orderListIndexs:e=>{const t={};return e.orderList.forEach((o,n)=>{t[o.id]=n}),t},orderedProductIds:e=>e.orderList.reduce((o,n)=>(o.push(...n.order.map(l=>l.id)),o),[]),productShowList(){return U.exports.orderBy(this.productList.map(e=>{const{price:t,moneyOffId:o,productCoupon:n,cutPrice:l}=e,r=v(t-n-l-j.moneyOffCalc(e,this.moneyOffMapping.config)-j.taoCoinCalc(e));return e.categoryCouponType=e.categoryCouponType?e.categoryCouponType:"",Object.assign(U.exports.cloneDeep(e),{balance:r,moneyOffIdOrder:Q(o)?-1:o,moneyOffDesc:this.moneyOffMapping.map[o],taoCoinPer:e.taoCoin?`${e.taoCoin}%`:"-",depositDesc:e.deposit?e.deposit:"-",cutPriceDesc:e.cutPrice?e.cutPrice:"-",productCouponDesc:e.productCoupon?e.productCoupon:"-"})}).filter(e=>this.prodFilterModel.disableOrdered?!this.orderedProductIds.includes(e.id):e).filter(e=>this.prodFilterModel.brandId?e.brandId===this.prodFilterModel.brandId:e),["categoryCouponType","moneyOffIdOrder","payTime","balance"],["desc","desc","asc","desc"])}},actions:{exportAll(){this.exportOrderList(),this.saveProductList(),this.saveBrandList()},addOrder(e){const{order:t}=e;this.orderList.push({...e,id:Z(),products:U.exports.orderBy(t,["brandId"],["desc"]).map(o=>o.productName).join("|")})},deleteOrder(e){const t=this.orderListIndexs[e.id];this.orderList.splice(t,1)},exportOrderList(){q(JSON.stringify(this.orderList,null,2),"json","orderList")},updateOrderList(e){this.orderList=e},updateProductSelectionList(e){this.productSelectionList=e},addProduct(e){const t={...e,id:this.productNextId},{productName:o}=t;this.productList.find(l=>l.productName===o)?F.error("\u91CD\u590D\u6DFB\u52A0\uFF01"):(this.productList.push(t),this.productNextId=this.productNextId+1)},updateProduct(e){const t=this.productListIndexs[e.id];this.productList.splice(t,1,e)},deleteProduct(e){const t=this.productListIndexs[e.id];this.productList.splice(t,1)},formatProductList(){const e=[];return this.productList.forEach(t=>{const o={};for(const n in oe)o[n]=t[n];e.push(o)}),e},saveProductList(){q(JSON.stringify(this.formatProductList(),null,2),"json","shoppingCart")},importProductList(e){this.productList=e,this.productNextId=U.exports.last(e.sort((t,o)=>t.id-o.id)).id+1},addBrand(e){const t={...e,id:Z()},{brandName:o}=t;this.brandList.find(l=>l.brandName===o)?F.error("\u91CD\u590D\u6DFB\u52A0\uFF01"):this.brandList.push(t)},updateBrand(e,t){this.brandList.splice(t,1,e)},deleteBrand(e){this.brandList.splice(e,1)},saveBrandList(){q(JSON.stringify(this.brandList,null,2),"json","brandList")},importBrandList(e){this.brandList=e}},persist:!0});function I(){return{cart:Te()}}const Ue={data(){return{dialogVisible:!1,formModel:{},rules:Se}},setup(){const{cart:e}=I(),t=e.categoryCouponMapping.options,o=e.moneyOffMapping.options;return{cart:e,categoryCouponOptions:t,moneyOffOptions:o}},methods:{initDialog({row:e,index:t}={}){this.dialogVisible=!0,this.isAdd=!e,this.formModel=U.exports.cloneDeep(e||oe),this.index=t},closeDialog(){this.dialogVisible=!1},async handleConfirm(){await this.$refs.form.validate(e=>{if(e){const{unitPrice:t,quantity:o}=this.formModel;Object.assign(this.formModel,{price:U.exports.round(+(t*o),2)}),this.isAdd?this.cart.addProduct(this.formModel):this.cart.updateProduct(this.formModel),this.closeDialog()}})}}},Pe=e=>(W("data-v-aed4d546"),e=e(),H(),e),Ie=Pe(()=>C("span",{class:"ml10"},"%",-1)),De={class:"dialog-footer"};function Ne(e,t,o,n,l,r){const i=s("el-input"),p=s("el-form-item"),c=s("el-option"),m=s("el-select"),f=s("el-input-number"),h=s("el-switch"),O=s("el-date-picker"),b=s("el-form"),_=s("el-button"),w=s("el-dialog");return y(),k(w,{modelValue:l.dialogVisible,"onUpdate:modelValue":t[16]||(t[16]=u=>l.dialogVisible=u),title:"\u65B0\u589E","destroy-on-close":""},{footer:d(()=>[C("span",De,[a(_,{onClick:r.closeDialog},{default:d(()=>[g("\u53D6\u6D88")]),_:1},8,["onClick"]),a(_,{type:"primary",onClick:r.handleConfirm},{default:d(()=>[g(" \u786E\u5B9A ")]),_:1},8,["onClick"])])]),default:d(()=>[a(b,{ref:"form","label-width":"120px",model:l.formModel,rules:l.rules,style:{"max-height":"55vh",overflow:"auto"}},{default:d(()=>[a(p,{label:"\u5546\u54C1\u540D\u79F0",prop:"productName"},{default:d(()=>[a(i,{modelValue:l.formModel.productName,"onUpdate:modelValue":t[0]||(t[0]=u=>l.formModel.productName=u)},null,8,["modelValue"])]),_:1}),a(p,{label:"\u54C1\u724C",prop:"brandId"},{default:d(()=>[a(m,{modelValue:l.formModel.brandId,"onUpdate:modelValue":t[1]||(t[1]=u=>l.formModel.brandId=u),placeholder:"\u8BF7\u9009\u62E9\u54C1\u724C"},{default:d(()=>[(y(!0),M(x,null,D(n.cart.brandMapping.options,u=>(y(),k(c,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"\u542B\u91CF",prop:"content"},{default:d(()=>[a(i,{modelValue:l.formModel.content,"onUpdate:modelValue":t[2]||(t[2]=u=>l.formModel.content=u)},null,8,["modelValue"])]),_:1}),a(p,{label:"\u5355\u4EF7",prop:"unitPrice"},{default:d(()=>[a(f,{modelValue:l.formModel.unitPrice,"onUpdate:modelValue":t[3]||(t[3]=u=>l.formModel.unitPrice=u),step:.01,controls:!1},null,8,["modelValue","step"])]),_:1}),a(p,{label:"\u6570\u91CF",prop:"quantity"},{default:d(()=>[a(f,{modelValue:l.formModel.quantity,"onUpdate:modelValue":t[4]||(t[4]=u=>l.formModel.quantity=u),min:1,controls:!1},null,8,["modelValue"])]),_:1}),a(p,{label:"\u6DD8\u91D1\u5E01\u6BD4\u4F8B",prop:"taoCoin"},{default:d(()=>[a(f,{modelValue:l.formModel.taoCoin,"onUpdate:modelValue":t[5]||(t[5]=u=>l.formModel.taoCoin=u),min:0,max:10,controls:!1},null,8,["modelValue"]),Ie]),_:1}),a(p,{label:"\u54C1\u7C7B\u5238\u7C7B\u578B",prop:"categoryCouponType"},{default:d(()=>[a(m,{modelValue:l.formModel.categoryCouponType,"onUpdate:modelValue":t[6]||(t[6]=u=>l.formModel.categoryCouponType=u),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u54C1\u7C7B\u5238\u7C7B\u578B"},{default:d(()=>[(y(!0),M(x,null,D(n.categoryCouponOptions,u=>(y(),k(c,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"\u6EE1\u51CF\u7C7B\u578B",prop:"moneyOffId"},{default:d(()=>[a(m,{modelValue:l.formModel.moneyOffId,"onUpdate:modelValue":t[7]||(t[7]=u=>l.formModel.moneyOffId=u),clearable:"",placeholder:"\u8BF7\u9009\u62E9\u6EE1\u51CF\u7C7B\u578B"},{default:d(()=>[(y(!0),M(x,null,D(n.moneyOffOptions,u=>(y(),k(c,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(p,{label:"\u662F\u5426\u53C2\u52A0\u6D88\u8D39\u5238",prop:"voncher"},{default:d(()=>[a(h,{modelValue:l.formModel.voncher,"onUpdate:modelValue":t[8]||(t[8]=u=>l.formModel.voncher=u)},null,8,["modelValue"])]),_:1}),a(p,{label:"\u5546\u54C1\u5238\u91D1\u989D",prop:"productCoupon"},{default:d(()=>[a(i,{modelValue:l.formModel.productCoupon,"onUpdate:modelValue":t[9]||(t[9]=u=>l.formModel.productCoupon=u),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),a(p,{label:"\u62CD\u4E0B\u7ACB\u51CF\u91D1\u989D",prop:"cutPrice"},{default:d(()=>[a(i,{modelValue:l.formModel.cutPrice,"onUpdate:modelValue":t[10]||(t[10]=u=>l.formModel.cutPrice=u),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),a(p,{label:"\u9884\u552E",prop:"presale"},{default:d(()=>[a(h,{modelValue:l.formModel.presale,"onUpdate:modelValue":t[11]||(t[11]=u=>l.formModel.presale=u)},null,8,["modelValue"])]),_:1}),J(a(p,{label:"\u5B9A\u91D1",prop:"deposit"},{default:d(()=>[a(i,{modelValue:l.formModel.deposit,"onUpdate:modelValue":t[12]||(t[12]=u=>l.formModel.deposit=u),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},512),[[G,l.formModel.presale]]),J(a(p,{label:"\u9884\u552E\u65F6\u95F4",prop:"presaleTime"},{default:d(()=>[a(O,{modelValue:l.formModel.presaleTime,"onUpdate:modelValue":t[13]||(t[13]=u=>l.formModel.presaleTime=u),type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1},512),[[G,l.formModel.presale]]),a(p,{label:"\u4ED8\u6B3E\u65F6\u95F4",prop:"payTime"},{default:d(()=>[a(O,{modelValue:l.formModel.payTime,"onUpdate:modelValue":t[14]||(t[14]=u=>l.formModel.payTime=u),type:"date",format:"YYYY/MM/DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),a(p,{label:"\u5907\u6CE8",prop:"remark"},{default:d(()=>[a(i,{modelValue:l.formModel.remark,"onUpdate:modelValue":t[15]||(t[15]=u=>l.formModel.remark=u),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}const Fe=V(Ue,[["render",Ne],["__scopeId","data-v-aed4d546"]]);const je={props:{dataModel:{type:Object},config:{type:Object}},setup(){return{isEmpty:Q,isString:ee,isArray:te}},computed:{itemModel(){return this.dataModel[this.config.key]}}};function Be(e,t,o,n,l,r){const i=s("el-tag");return y(),M(x,null,[n.isString(r.itemModel)&&!n.isEmpty(o.dataModel[o.config.key])?(y(),k(i,{key:0,effect:o.config.effect,color:o.config.color&&o.config.color[o.dataModel[o.config.key]],type:o.config.type&&o.config.type[o.dataModel[o.config.key]],class:ie([{"border-none":o.config.border==="none"}])},{default:d(()=>[g(L(o.config.map[o.dataModel[o.config.key]]),1)]),_:1},8,["effect","color","type","class"])):K("",!0),n.isArray(r.itemModel)&&r.itemModel.length?(y(!0),M(x,{key:1},D(r.itemModel,(p,c)=>(y(),k(i,{key:c,type:o.config.type&&o.config.type[o.dataModel[o.config.key]],effect:o.config.effect},{default:d(()=>[g(L(o.config.map[p]),1)]),_:2},1032,["type","effect"]))),128)):K("",!0)],64)}const X=V(je,[["render",Be]]),Ae={props:{dataModel:{type:Object,required:!0},config:{type:Object,required:!0}},data(){return{}},methods:{}};function Re(e,t,o,n,l,r){const i=s("el-option"),p=s("el-select");return y(),k(p,{modelValue:o.dataModel[o.config.key],"onUpdate:modelValue":t[0]||(t[0]=c=>o.dataModel[o.config.key]=c),"collapse-tags":"","collapse-tags-tooltip":"",clearable:o.config.clearable,multiple:o.config.multiple,disabled:o.config.disabled},{default:d(()=>[(y(!0),M(x,null,D(o.config.options,c=>(y(),k(i,{key:c.value,label:c.label,value:c.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","clearable","multiple","disabled"])}const le=V(Ae,[["render",Re]]);const Ee={components:{AddOrUpdate:Fe,TagItem:X,SelectItem:le},data(){return{checkCateCouponItems:!1}},setup(){const{cart:e}=I(),{productSelectionList:t,brandList:o,prodFilterModel:n}=B(e),l=T(()=>e.categoryCouponMapping),r=T(()=>e.brandMapping),i=T(()=>e.productShowList);return{categoryCouponMapping:l,productSelectionList:t,brandMapping:r,prodFilterModel:n,dataSource:i,cart:e,brandList:o,isEmpty:Q}},methods:{handleAddOrder(){const e={order:this.productSelectionList};this.cart.addOrder(e),F.success("\u6DFB\u52A0\u6210\u529F\uFF01")},handleAddOrUpdate(e){this.$refs.add.initDialog(e)},handleBeforeUpload(e){const t=new FileReader;t.readAsText(e),t.onload=o=>{const n=JSON.parse(o.target.result);this.cart.importProductList(n)}},handleCateCouponItems(){this.dataSource.forEach(e=>{e.categoryCouponType&&this.$refs.table.toggleRowSelection(e,this.prodFilterModel.checkCateCouponItems)})},handleSelectionChange(e){this.cart.updateProductSelectionList(e)}}},qe={class:"cart__wrapper"},ze={class:"oper-btn__wrapper",style:{}},Ye={class:"cart-table__wrapper"};function Je(e,t,o,n,l,r){const i=s("el-button"),p=s("el-upload"),c=s("el-checkbox"),m=s("select-item"),f=s("el-table-column"),h=s("tag-item"),O=s("el-tag"),b=s("el-table"),_=s("el-auto-resizer"),w=s("add-or-update");return y(),M("div",qe,[C("div",ze,[C("div",null,[a(i,{type:"primary",disabled:!n.brandList.length,onClick:r.handleAddOrUpdate},{default:d(()=>[g("\u65B0\u589E\u5546\u54C1")]),_:1},8,["disabled","onClick"]),a(i,{type:"primary",onClick:n.cart.saveProductList},{default:d(()=>[g("\u5BFC\u51FA")]),_:1},8,["onClick"]),a(p,{accept:".json","show-file-list":!1,action:"#",beforeUpload:r.handleBeforeUpload},{trigger:d(()=>[a(i,null,{default:d(()=>[g(" \u5BFC\u5165 ")]),_:1})]),_:1},8,["accept","beforeUpload"]),a(i,{disabled:!n.productSelectionList.length,onClick:r.handleAddOrder},{default:d(()=>[g("\u52A0\u5165\u8BA2\u5355")]),_:1},8,["disabled","onClick"])]),C("div",null,[C("div",null,[a(c,{modelValue:n.prodFilterModel.disableOrdered,"onUpdate:modelValue":t[0]||(t[0]=u=>n.prodFilterModel.disableOrdered=u)},null,8,["modelValue"]),g(" \u53BB\u9664\u5DF2\u6807\u8BB0\u5546\u54C1 ")]),C("div",null,[a(c,{modelValue:n.prodFilterModel.checkCateCouponItems,"onUpdate:modelValue":t[1]||(t[1]=u=>n.prodFilterModel.checkCateCouponItems=u),onChange:r.handleCateCouponItems},null,8,["modelValue","onChange"]),g(" \u52FE\u9009\u4F7F\u7528\u54C1\u7C7B\u5238\u5546\u54C1 ")]),a(m,{dataModel:n.prodFilterModel,config:{key:"brandId",options:n.brandMapping.options,clearable:!0}},null,8,["dataModel","config"])])]),C("div",Ye,[a(_,null,{default:d(({height:u,width:ae})=>[a(b,{ref:"table",data:n.dataSource,width:ae,height:u,"show-summary":"",onSelectionChange:r.handleSelectionChange},{default:d(()=>[a(f,{type:"selection",width:"60",fixed:"left"}),a(f,{prop:"productName",label:"\u5546\u54C1\u540D",width:"160",fixed:"left"}),a(f,{prop:"content",label:"\u542B\u91CF",width:"100"}),a(f,{prop:"quantity",label:"\u6570\u91CF",width:"60"}),a(f,{prop:"brand",label:"\u54C1\u724C",width:"100",sortable:""},{default:d(({row:S})=>[a(h,{dataModel:S,config:{key:"brandId",color:n.brandMapping.color,map:n.brandMapping.map,border:"none",effect:"dark"}},null,8,["dataModel","config"])]),_:1}),a(f,{prop:"moneyOffId",label:"\u8DE8\u5E97\u6EE1\u51CF",width:"100"},{default:d(({row:S})=>[S.moneyOffDesc?(y(),k(O,{key:0,effect:"dark"},{default:d(()=>[g(L(S.moneyOffDesc),1)]),_:2},1024)):K("",!0)]),_:1}),a(f,{prop:"categoryCouponType",label:"\u54C1\u7C7B\u5238",width:"120"},{default:d(({row:S})=>[a(h,{dataModel:S,config:{key:"categoryCouponType",map:n.categoryCouponMapping.map,type:n.categoryCouponMapping.type,effect:"plain"}},null,8,["dataModel","config"])]),_:1}),a(f,{prop:"price",label:"\u6D3B\u52A8\u4EF7",width:"100",sortable:""}),a(f,{prop:"productCouponDesc",label:"\u5546\u54C1\u5238",width:"80"}),a(f,{prop:"cutPriceDesc",label:"\u62CD\u4E0B\u7ACB\u51CF",width:"80"}),a(f,{prop:"taoCoinPer",label:"\u6DD8\u91D1\u5E01",width:"80"}),a(f,{prop:"depositDesc",label:"\u5B9A\u91D1",width:"80"}),a(f,{prop:"presaleTime",label:"\u9884\u552E\u5F00\u542F\u65F6\u95F4",width:"120"}),a(f,{prop:"payTime",label:"\u4ED8\u6B3E\u5F00\u542F\u65F6\u95F4",width:"140",sortable:""}),a(f,{fixed:"right",prop:"balance",label:"\u5230\u624B\u4EF7",width:"100"}),a(f,{fixed:"right",prop:"remark",label:"\u5907\u6CE8",width:"400"}),a(f,{fixed:"right",label:"\u64CD\u4F5C",width:"120"},{default:d(({row:S})=>[a(i,{link:"",type:"primary",size:"small",onClick:N(re=>r.handleAddOrUpdate({row:S}),["prevent"])},{default:d(()=>[g(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),a(i,{link:"",type:"primary",size:"small",onClick:N(re=>n.cart.deleteProduct(S),["prevent"])},{default:d(()=>[g(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data","width","height","onSelectionChange"])]),_:1})]),a(w,{ref:"add"},null,512)])}const Ke=V(Ee,[["render",Je],["__scopeId","data-v-75208652"]]),We={data(){return{dialogVisible:!1,formModel:{},rules:xe}},setup(){const{cart:e}=I();return{cart:e}},methods:{initDialog({row:e,index:t}={}){this.dialogVisible=!0,this.isAdd=!e,this.formModel=U.exports.cloneDeep(e||Le),this.index=t},closeDialog(){this.dialogVisible=!1},async handleConfirm(){await this.$refs.form.validate(e=>{e&&(this.isAdd?this.cart.addBrand(this.formModel):this.cart.updateBrand(this.formModel,this.index),this.closeDialog())})}}},He={class:"dialog-footer"};function Qe(e,t,o,n,l,r){const i=s("el-input"),p=s("el-form-item"),c=s("el-form"),m=s("el-button"),f=s("el-dialog");return y(),k(f,{modelValue:l.dialogVisible,"onUpdate:modelValue":t[2]||(t[2]=h=>l.dialogVisible=h),title:"\u65B0\u589E",width:"30%","destroy-on-close":"",center:""},{footer:d(()=>[C("span",He,[a(m,{onClick:r.closeDialog},{default:d(()=>[g("\u53D6\u6D88")]),_:1},8,["onClick"]),a(m,{type:"primary",onClick:r.handleConfirm},{default:d(()=>[g(" \u786E\u5B9A ")]),_:1},8,["onClick"])])]),default:d(()=>[a(c,{ref:"form","label-width":"100px",model:l.formModel,rules:l.rules},{default:d(()=>[a(p,{label:"\u54C1\u724C\u540D\u79F0",prop:"brandName"},{default:d(()=>[a(i,{modelValue:l.formModel.brandName,"onUpdate:modelValue":t[0]||(t[0]=h=>l.formModel.brandName=h)},null,8,["modelValue"])]),_:1}),a(p,{label:"\u5907\u6CE8",prop:"remark"},{default:d(()=>[a(i,{modelValue:l.formModel.remark,"onUpdate:modelValue":t[1]||(t[1]=h=>l.formModel.remark=h),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}const Xe=V(We,[["render",Qe]]);const Ge={components:{AddBrand:Xe},data(){return{columns:[]}},setup(){const{cart:e}=I(),{brandList:t}=B(e);return{cart:e,brandList:t}},methods:{handleAddOrUpdate(e){this.$refs.add.initDialog(e)},handleBeforeUpload(e){const t=new FileReader;t.readAsText(e),t.onload=o=>{const n=JSON.parse(o.target.result);this.cart.importBrandList(n)}}}},Ze={class:"cart__wrapper"},$e={style:{display:"flex"}},et={class:"cart-table__wrapper"};function tt(e,t,o,n,l,r){const i=s("el-button"),p=s("el-upload"),c=s("el-table-column"),m=s("el-table"),f=s("el-auto-resizer"),h=s("add-brand");return y(),M("div",Ze,[C("div",$e,[a(i,{type:"primary",onClick:r.handleAddOrUpdate},{default:d(()=>[g("\u65B0\u589E\u54C1\u724C")]),_:1},8,["onClick"]),a(i,{type:"primary",onClick:n.cart.saveBrandList},{default:d(()=>[g("\u5BFC\u51FA")]),_:1},8,["onClick"]),a(p,{accept:".json","show-file-list":!1,action:"#",beforeUpload:r.handleBeforeUpload},{trigger:d(()=>[a(i,null,{default:d(()=>[g(" \u5BFC\u5165 ")]),_:1})]),_:1},8,["accept","beforeUpload"])]),C("div",et,[a(f,null,{default:d(({height:O,width:b})=>[a(m,{data:n.brandList,width:b,height:O},{default:d(()=>[a(c,{prop:"id",label:"ID",width:"120"}),a(c,{prop:"brandName",label:"\u54C1\u724C\u540D",width:"150"}),a(c,{prop:"remark",label:"\u5907\u6CE8"}),a(c,{label:"\u64CD\u4F5C",width:"120"},{default:d(({row:_,$index:w})=>[a(i,{link:"",type:"primary",size:"small",onClick:N(u=>r.handleAddOrUpdate({row:_,index:w}),["prevent"])},{default:d(()=>[g(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),a(i,{link:"",type:"primary",size:"small",onClick:N(u=>n.cart.deleteBrand(w),["prevent"])},{default:d(()=>[g(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data","width","height"])]),_:1})]),a(h,{ref:"add"},null,512)])}const ot=V(Ge,[["render",tt],["__scopeId","data-v-d1e7202b"]]);const lt={components:{SelectItem:le},data(){return{}},props:{total:{type:Number,default:0},result:{type:Object}},setup(e,t){const{cart:o}=I(),{productSelectionList:n,resultFilterModel:l}=B(o),r=T(()=>o.categoryCouponMapping),i=T(()=>o.moneyOffMapping),p=()=>t.emit("calc"),c=T(()=>o.voncherOptions);return{selectedResult:T(()=>new j({productList:n.value,calcCon:l.value,moneyOffConfig:i.value.config,categoryCouponConfig:r.value.config}).total()),cart:o,voncherOptions:c,resultFilterModel:l,productSelectionList:n,handleCalcMoneyOff:p}}},nt=e=>(W("data-v-e633046c"),e=e(),H(),e),at={class:"calc-btn__wrapper"},rt=nt(()=>C("div",{class:"ml10"},"\u7B5B\u9009\u7CBE\u5EA6\uFF1A",-1)),dt={class:"ml10"};function it(e,t,o,n,l,r){const i=s("el-input"),p=s("el-form-item"),c=s("el-checkbox"),m=s("select-item"),f=s("el-option"),h=s("el-select"),O=s("el-form"),b=s("el-button");return y(),M("div",at,[a(O,{ref:"form","label-width":"100px",inline:!0,"label-suffix":":"},{default:d(()=>[a(p,{label:"\u6EE1\u51CF\u8BA1\u7B97"},{default:d(()=>[rt,a(i,{modelValue:n.resultFilterModel.moneyOff.precision,"onUpdate:modelValue":t[0]||(t[0]=_=>n.resultFilterModel.moneyOff.precision=_),modelModifiers:{number:!0},disabled:!n.resultFilterModel.moneyOff.calc,style:{width:"100px"}},null,8,["modelValue","disabled"])]),_:1}),a(p,{label:"\u4F7F\u7528\u54C1\u7C7B\u5238"},{default:d(()=>[a(c,{modelValue:n.resultFilterModel.categoryCoupon.calc,"onUpdate:modelValue":t[1]||(t[1]=_=>n.resultFilterModel.categoryCoupon.calc=_)},null,8,["modelValue"]),a(m,{class:"ml10",style:{width:"250px"},dataModel:n.resultFilterModel.categoryCoupon,config:{key:"type",clearable:!0,multiple:!0,disabled:!n.resultFilterModel.categoryCoupon.calc,options:n.cart.categoryCouponMapping.options}},null,8,["dataModel","config"])]),_:1}),a(p,{label:"\u4F7F\u7528\u6D88\u8D39\u5238"},{default:d(()=>[a(c,{modelValue:n.resultFilterModel.balance.calc,"onUpdate:modelValue":t[2]||(t[2]=_=>n.resultFilterModel.balance.calc=_)},null,8,["modelValue"]),a(h,{modelValue:n.resultFilterModel.balance.threshold,"onUpdate:modelValue":t[3]||(t[3]=_=>n.resultFilterModel.balance.threshold=_),class:"ml10",clearable:"",style:{width:"120px"},disabled:!n.resultFilterModel.balance.calc},{default:d(()=>[(y(!0),M(x,null,D(n.voncherOptions,_=>(y(),k(f,{key:_.value,label:_.label,value:_.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"]),g(" \u7B5B\u9009\u7CBE\u5EA6\uFF1A "),a(i,{modelValue:n.resultFilterModel.balance.precision,"onUpdate:modelValue":t[4]||(t[4]=_=>n.resultFilterModel.balance.precision=_),modelModifiers:{number:!0},disabled:!n.resultFilterModel.balance.calc,style:{width:"100px"}},null,8,["modelValue","disabled"])]),_:1})]),_:1},512),C("div",null," \u9009\u4E2D"+L(n.productSelectionList.length)+"\u4E2A\u5546\u54C1\uFF0C\u603B\u4EF7"+L(n.selectedResult.total)+"\uFF0C \u5B9E\u4ED8"+L(n.selectedResult.balance)+"\uFF0C\u5C3E\u6B3E"+L(n.selectedResult.cutDeposit),1),a(b,{class:"ml10",disabled:!n.productSelectionList.length||n.productSelectionList.length>23,onClick:n.handleCalcMoneyOff},{default:d(()=>[g("\u67E5\u8BE2")]),_:1},8,["disabled","onClick"]),C("div",dt,"\u7ED3\u679C\u5171"+L(o.total)+"\u6761",1)])}const st=V(lt,[["render",it],["__scopeId","data-v-e633046c"]]);const ct={components:{FilterCondition:st,TagItem:X},data(){return{columns:[],orders:[]}},setup(){const{cart:e}=I(),{productList:t,productSelectionList:o,resultFilterModel:n}=B(e),l=E(!1),r=E(""),i=E([]),p=()=>{l.value=!0,i.value=[],r.value="\u8BA1\u7B97\u4E2D"},c=()=>{l.value=!1,r.value="",i.value.length===0&&F.info("\u65E0\u7ED3\u679C\uFF0C\u8BF7\u4FEE\u6539\u7B5B\u9009\u6761\u4EF6!")},m=()=>new j({productList:A(o.value.length?o.value:t.value),calcCon:A(n.value),moneyOffConfig:A(e.moneyOffMapping.config),categoryCouponConfig:A(e.categoryCouponMapping.config)}),f=()=>{p(),setTimeout(async()=>{const b=m();i.value=await b.calc(),c()},50)},h={balanceDiff:"asc",moneyOffDiff:"asc",total:"desc"};return{sortState:h,onSort:({key:b,order:_})=>{h[b]=_,i.value=U.exports.sortBy(i.value,[b],[_])},cart:e,productList:t,productSelectionList:o,loading:l,loadingMsg:r,dataSource:i,handleCalcMoneyOff:f,categoryCouponMap:T(()=>e.categoryCouponMapping.map)}},methods:{handleMarkOrder({row:e}){this.cart.addOrder(e),F.success("\u6DFB\u52A0\u6210\u529F"),location.reload()},generateColumns(){const e=[{key:"products",title:"\u8BA2\u5355\u5546\u54C1",width:800},{key:"total",title:"\u603B\u8BA1",width:100,sortable:!0},{key:"moneyOffPriceTotal",title:"\u6EE1\u51CF\u603B\u8BA1",width:100},{key:"moneyOffDiff",title:"\u6EE1\u51CF\u5DEE\u503C",width:100,sortable:!0},{key:"balance",title:"\u5B9E\u4ED8",width:100},{key:"balanceDiff",title:"\u6D88\u8D39\u5238\u95E8\u69DB\u5DEE\u503C",width:150,sortable:!0},{key:"categoryCoupon",title:"\u4F7F\u7528\u54C1\u7C7B\u5238",type:"tag",map:this.categoryCouponMap,width:200},{key:"operations",width:120,type:"oper",title:"\u64CD\u4F5C"}];this.columns=e.map(t=>{const{key:o}=t;return Object.assign(t,{props:o,dataKey:o})})}},created(){this.generateColumns()}},ut=["element-loading-text"],pt={class:"sln__wrapper"};function ft(e,t,o,n,l,r){const i=s("filter-condition"),p=s("el-button"),c=s("tag-item"),m=s("el-table-v2"),f=s("el-auto-resizer"),h=se("loading");return J((y(),M("div",{class:"result__wrapper","element-loading-text":n.loadingMsg},[a(i,{total:n.dataSource.length,onCalc:n.handleCalcMoneyOff},null,8,["total","onCalc"]),C("div",pt,[a(f,null,{default:d(({height:O,width:b})=>[a(m,{columns:l.columns,data:n.dataSource,width:b,height:O,"sort-state":n.sortState,onColumnSort:n.onSort},{cell:d(({column:_,rowData:w})=>[_.type==="oper"?(y(),k(p,{key:0,link:"",type:"primary",size:"small",onClick:N(u=>r.handleMarkOrder({row:w}),["prevent"])},{default:d(()=>[g(" \u6807\u8BB0 ")]),_:2},1032,["onClick"])):_.type==="tag"?(y(),k(c,{key:1,dataModel:w,config:_},null,8,["dataModel","config"])):(y(),M(x,{key:2},[g(L(w[_.dataKey]),1)],64))]),_:2},1032,["columns","data","width","height","sort-state","onColumnSort"])]),_:1})])],8,ut)),[[h,n.loading]])}const mt=V(ct,[["render",ft],["__scopeId","data-v-5e076109"]]),_t={components:{TagItem:X},data(){return{}},setup(){const{cart:e}=I(),{orderList:t}=B(e);return{orderList:t,cart:e,categoryCouponMap:T(()=>e.categoryCouponMapping.map)}},methods:{handleBeforeUpload(e){ke(e).then(t=>{this.cart.updateOrderList(t)})},handleDelOrder({row:e}){this.cart.deleteOrder(e)},generateColumns(){const e=[{key:"products",title:"\u8BA2\u5355\u5546\u54C1",width:800},{key:"total",title:"\u603B\u8BA1",width:100},{key:"moneyOffPriceTotal",title:"\u6EE1\u51CF\u603B\u8BA1",width:100},{key:"moneyOffDiff",title:"\u6EE1\u51CF\u5DEE\u503C",width:100},{key:"balance",title:"\u5B9E\u4ED8",width:100},{key:"balanceDiff",title:"\u6D88\u8D39\u5238\u95E8\u69DB\u5DEE\u503C",width:150},{key:"categoryCoupon",title:"\u4F7F\u7528\u54C1\u7C7B\u5238",type:"tag",map:this.categoryCouponMap,width:200},{key:"operations",type:"oper",title:"\u64CD\u4F5C",width:100}];this.columns=e.map(t=>{const{key:o}=t;return Object.assign(t,{props:o,dataKey:o})})}},created(){this.generateColumns()}},yt={class:"cart__wrapper"},gt={style:{display:"flex",gap:"10px"}},ht={class:"cart-table__wrapper"};function bt(e,t,o,n,l,r){const i=s("el-button"),p=s("el-upload"),c=s("tag-item"),m=s("el-table-v2"),f=s("el-auto-resizer");return y(),M("div",yt,[C("div",gt,[a(i,{type:"primary",onClick:n.cart.exportOrderList},{default:d(()=>[g("\u5BFC\u51FA")]),_:1},8,["onClick"]),a(p,{accept:".json","show-file-list":!1,action:"#",beforeUpload:r.handleBeforeUpload},{trigger:d(()=>[a(i,null,{default:d(()=>[g(" \u5BFC\u5165 ")]),_:1})]),_:1},8,["accept","beforeUpload"])]),C("div",ht,[a(f,null,{default:d(({height:h,width:O})=>[a(m,{columns:e.columns,data:n.orderList,width:O,height:h},{cell:d(({column:b,rowData:_})=>[b.type==="oper"?(y(),k(i,{key:0,link:"",type:"primary",size:"small",onClick:N(w=>r.handleDelOrder({row:_}),["prevent"])},{default:d(()=>[g(" \u5220\u9664 ")]),_:2},1032,["onClick"])):b.type==="tag"?(y(),k(c,{key:1,dataModel:_,config:b},null,8,["dataModel","config"])):(y(),M(x,{key:2},[g(L(_[b.dataKey]),1)],64))]),_:2},1032,["columns","data","width","height"])]),_:1})])])}const Ct=V(_t,[["render",bt]]);const Mt={data(){return{activeName:"cart"}},setup(){const{cart:e}=I();return ce(()=>{e.updateProductSelectionList([])}),{cart:e}},components:{ShoppingCart:Ke,MoneyOffResult:mt,BrandList:ot,OrderList:Ct},methods:{}},Ot={class:"page_wrapper"},vt={class:"main__wrapper"},kt={class:"export__btn"};function wt(e,t,o,n,l,r){const i=s("el-button"),p=s("shopping-cart"),c=s("el-tab-pane"),m=s("brand-list"),f=s("order-list"),h=s("el-tabs"),O=s("money-off-result");return y(),M("div",Ot,[C("div",vt,[C("div",kt,[a(i,{type:"primary",onClick:n.cart.exportAll},{default:d(()=>[g("\u5168\u90E8\u5BFC\u51FA")]),_:1},8,["onClick"])]),a(h,{modelValue:l.activeName,"onUpdate:modelValue":t[0]||(t[0]=b=>l.activeName=b)},{default:d(()=>[a(c,{label:"\u8D2D\u7269\u8F66",name:"cart"},{default:d(()=>[a(p)]),_:1}),a(c,{label:"\u54C1\u724C",name:"brand"},{default:d(()=>[a(m)]),_:1}),a(c,{label:"\u8BA2\u5355\u7EC4\u5408",name:"order"},{default:d(()=>[a(f)]),_:1})]),_:1},8,["modelValue"])]),a(O,{class:"money-off-wrapper"})])}const Vt=V(Mt,[["render",wt]]),Lt=ue({history:pe("/moneyoffcalc/"),routes:[{path:"/",name:"home",component:Vt}]});const R=fe(Oe),ne=me();ne.use(_e);R.use(ne);R.use(Lt).use(ge);R.config.globalProperties.$msg=F;R.mount("#app");
